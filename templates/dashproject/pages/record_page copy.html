{% extends 'dashproject/base/layout.html' %}
{% load static %}
{% block content %}
<div class="container-fluid">
  <div class="row mt-2 content-home">
    <div class="col-lg-3 col-6">
      <!-- small box -->
      <div class="small-box bg-info">
        <div class="inner">
          <h3>150</h3>

          <p>Report Waiting</p>
        </div>
        <div class="icon">
          <i class="ion ion-bag"></i>
        </div>
        <a href="#" class="small-box-footer"
          >More info <i class="fas fa-arrow-circle-right"></i
        ></a>
      </div>
    </div>
    <!-- ./col -->
    <div class="col-lg-3 col-6">
      <!-- small box -->
      <div class="small-box bg-success">
        <div class="inner">
          <h3>53<sup style="font-size: 20px">%</sup></h3>

          <p>Incomplete</p>
        </div>
        <div class="icon">
          <i class="ion ion-stats-bars"></i>
        </div>
        <a href="#" class="small-box-footer"
          >More info <i class="fas fa-arrow-circle-right"></i
        ></a>
      </div>
    </div>
    <!-- ./col -->
    <div class="col-lg-3 col-6">
      <!-- small box -->
      <div class="small-box bg-warning">
        <div class="inner">
          <h3>44</h3>

          <p>Finalized</p>
        </div>
        <div class="icon">
          <i class="ion ion-person-add"></i>
        </div>
        <a href="#" class="small-box-footer"
          >More info <i class="fas fa-arrow-circle-right"></i
        ></a>
      </div>
    </div>
    <!-- ./col -->
    <div class="col-lg-3 col-6">
      <!-- small box -->
      <div class="small-box bg-danger">
        <div class="inner">
          <h3>65</h3>

          <p>Archived</p>
        </div>
        <div class="icon">
          <i class="ion ion-pie-graph"></i>
        </div>
        <a href="#" class="small-box-footer"
          >More info <i class="fas fa-arrow-circle-right"></i
        ></a>
      </div>
    </div>
    <!-- ./col -->
  </div>
  </div>

  <div class="row content-home">
    <div class="col">
      <h6>Records <span class="badge badge-primary">{{ records_count }}</span></h6>
      <table class="table mt-2 table-bordered table-hover" id="example2">
        <thead>
          <tr>
            <th>Report URN</th>
            <th>Directorate</th>
            <th>Information Source</th>
            <th>User</th>
            <th>Updated at</th>
            <th>Status</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for record in records %}
          <tr class="mt-2">
              <td><a href="#">{{ record.information_source_id}}</a> </td>
              <td>{{ record.department.name }}</td>
              <td>{{ record.information_source.name }}</td>
              <td>{{ record.user.name }}</td>
              <td><time datetime="">{{ record.updated_at }}</time></td>
              <td class="badge badge-secondary ml-2"><i class="{% if record.status.name == 'Finalized' %}fas fa-folder {%else %} fas fa-pencil-alt{% endif %}"></i>{{ record.status.name }}</td>
              <td>

                <button type="button" class="btn btn-transparent dropdown-toggle text-uppercase" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  Actions
              </button>
              <div class="dropdown-menu">
                <button type="button" class="btn btn-transparent p-3 text-uppercase view-subject-btn fas fa-eye" data-id="{{ record.id }}" data-toggle="modal" data-target="#modal-default">
                  View
                </button>
                  {% comment %} <a class="dropdown-item view-subject-btn " href="subject_details/{{record.id}}"><i class="fas fa-eye"></i> View</a> {% endcomment %}
              </div>
                 
              </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  <!-- Modal -->
  <div class="modal fade" id="modal-default" tabindex="-1" role="dialog" aria-labelledby="modal-default-label" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="modal-default-label">Subject</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="card">
            <p><strong>First Name</strong></p>
            <span class="subject-first-name"></span>
            <p><strong>Last Name</strong></p>
            <span class="subject-last-name"></span>
            <p><strong>Gender</strong></p>
            <span class="subject-gender"></span>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary">Save changes</button>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
